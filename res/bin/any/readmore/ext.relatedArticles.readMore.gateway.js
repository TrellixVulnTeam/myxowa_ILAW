mw.loader.implement("ext.relatedArticles.readMore.gateway@vbs1t",function($,jQuery,require,module){(function(){mw.relatedPages={};function RelatedPagesGateway(api,currentPage,editorCuratedPages,useCirrusSearch,onlyUseCirrusSearch,descriptionSource){this.api=api;this.currentPage=currentPage;this.useCirrusSearch=useCirrusSearch;this.descriptionSource=descriptionSource;if(onlyUseCirrusSearch){editorCuratedPages=[];}this.editorCuratedPages=editorCuratedPages||[];}OO.initClass(RelatedPagesGateway);function getPages(result){return result&&result.query&&result.query.pages?result.query.pages:[];}RelatedPagesGateway.prototype.getForCurrentPage=function(limit){var parameters={action:'query',formatversion:2,prop:'pageimages',piprop:'thumbnail',pithumbsize:160},relatedPages=this.editorCuratedPages.slice(0,limit);switch(this.descriptionSource){case'wikidata':parameters.prop+='|description';break;case'textextracts':parameters.prop+='|extracts';parameters.exsentences='1';parameters.exintro='1';
parameters.explaintext='1';break;case'pagedescription':parameters.prop+='|pageprops';parameters.ppprop='description';break;}if(relatedPages.length){parameters.pilimit=relatedPages.length;parameters.continue='';parameters.titles=relatedPages;}else if(this.useCirrusSearch){parameters.pilimit=limit;parameters.generator='search';parameters.gsrsearch='morelike:'+this.currentPage;parameters.gsrnamespace='0';parameters.gsrlimit=limit;parameters.gsrqiprofile='classic_noboostlinks';parameters.uselang='content';parameters.smaxage=86400;parameters.maxage=86400;}else{return $.Deferred().resolve([]);}return this.api.get(parameters).then(getPages);};mw.relatedPages.RelatedPagesGateway=RelatedPagesGateway;}());});